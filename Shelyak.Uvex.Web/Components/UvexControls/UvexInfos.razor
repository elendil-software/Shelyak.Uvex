@inherits UvexComponentBase
@rendermode InteractiveServer

<Card Class="mb-4">
    <CardBody>
        <CardTitle>Informations</CardTitle>
        <dl class="row">
            <dt class="col-sm-2">Spectrographe</dt>
            <dd class="col-sm-10">@SpectrographName</dd>
            <dt class="col-sm-2">Firmware</dt>
            <dd class="col-sm-10">@Firmware</dd>
            <dt class="col-sm-2">Version protocole</dt>
            <dd class="col-sm-10">@UsisProtocolVersion</dd>
        </dl>
    </CardBody>
</Card>

@code
{
    public string SpectrographName { get; set; }
    public string Firmware { get; set; }
    public string UsisProtocolVersion { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await LoadData();
        await base.OnInitializedAsync();
    }

    protected override async Task LoadData()
    {
        var response = await UvexHttpClient.GetDeviceName();
        HandleAlpacaError(response);
        SpectrographName = response.Value.Value;

        var softwareVersion = await UvexHttpClient.GetSoftwareVersion();
        HandleAlpacaError(softwareVersion);
        Firmware = softwareVersion.Value.Value;

        var protocolVersion = await UvexHttpClient.GetProtocolVersion();
        HandleAlpacaError(protocolVersion);
        UsisProtocolVersion = protocolVersion.Value.Value;
    }
}